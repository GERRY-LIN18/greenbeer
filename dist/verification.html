<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YOUR AGE ? | GREEN BEER</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/rwd.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js" integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0=" crossorigin="anonymous"></script>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Acme&family=Boogaloo&display=swap');
    body {
        font-family: "Trebuchet MS", Helvetica, sans-serif;
    }
</style>
    </style>
</head>
<body class = "bg-color-F6D042">
    <div class="warning-sign">
        <p class="warning-sign-slogan">
            To secure your safety, do not drink and drive.<br>Please do not drink if you are a minor</p>
    </div>

    <div class="verification">
        <h1>Please tell us your date of birth</h1>
    <input type="text" id="day" max="12" min="1" value="" placeholder="DD" maxlength="2" value="12">
    <input type="text" id="month" min="1" max="31" placeholder="MM" maxlength="2">
    <input type="text" id="year" placeholder="YYYY" maxlength="4">
    <button type="submit" value="submit" name="submit" id="verification_submit" class="verify">submit</button>
    </div>

    <script>

        $(document).ready(function(){

            let today = new Date();
            let expD = new RegExp(/^[0-3][0-9]/);
            let expM = new RegExp(/^[0-1][0-9]/);
            let expY = new RegExp(/^[1-2][0-9][0-9][0-9]/);

            $('input').keyup(function(){
                console.log(expD.test($('#day').val()))
                console.log(expM.test($('#month').val()))
                console.log(expY.test($('#year').val()))
                
                if( expD.test($('#day').val()) && expM.test($('#month').val()) && expY.test($('#year').val())){
                    console.log('格式正確')

                    if( $('#day').val().length == 2 && $('#month').val().length == 2 && $('#year').val().length == 4 &&
                    $('#day').val()>=1 && $('#day').val()<=31 &&
                    $('#month').val() >=1 &&  $('#month').val()<=12 && 
                    $('#year').val() >=1900 && $('#year').val()<= today.getFullYear() ){
                            $('#verification_submit').prop('disabled',false).addClass("verifyPass")


                    }else{
                            console.log('數字錯誤')
                            $('#verification_submit').prop('disabled',true).removeClass("verifyPass")
                    }
                }else{
                    console.log('格式錯誤')

                    $('#verification_submit').prop('disabled',true).removeClass("verifyPass")
                }
            })

            $('#verification_submit').prop('disabled',true).click(function(){
                let d = parseInt( today.getFullYear() - $('#year').val());

                if ( d >18 ){
                    localStorage.setItem('greenbeer', '1');
                    window.location.href="index.html";
                } else {
                    window.location.assign("https://shopee.tw/search?keyword=%E9%A4%8A%E6%A8%82%E5%A4%9A");

                }
            })
        })
    </script>

</body>
</html>